<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>SUCSS Key Signing Party</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link href="css/main.css" rel="stylesheet"/>
</head>

<body>
    <h1>SUCSS Key Signing Party</h1>

    <p>Before signing up for the SUCSS PGP Key signing party, please ensure:</p>
    <ul class="instructions">
        <li>
            You have a PGP key. If you don't, generate one following the <a href="TODO">instructions on our wiki</a>.
        </li>
        <li>
            You have a GnuPG installed. If you don't, see the <a href="TODO">instructions on our wiki</a>.
        </li>
    </ul>

    <p>Next, please:</p>
    <ol class="instructions">
        <li>
            Export your <strong>public</strong> PGP key.
            <pre><code>gpg --armor --export <i>your_email</i></code></pre>
        </li>

        <li>
            Copy - paste your exported key here:
            <form>
                <!-- GPG output seems to always be 64 chars long -->
                <textarea id="public-key-input" name="key" type="text" cols="64" rows="10" placeholder="ASCII armored PGP key" required></textarea>
            </form>
        </li>

        <li>
            Check the details below are correct:
            <p class="error" id="public-key-error"></p>
            <div class="info" id="public-key-info"></div>
        </li>

        <li>
            <button class="key-button" onclick="genSlip();">Print your key slip</button> (remember to bring it to the party!).
        </li>

        <li>
            <button class="key-button" onclick="submitKey();">Confirm your participation!</button>
            <p class="error" id="submission-error" hidden></p>
            <p class="info" id="submission-info" hidden></p>
        </li>
    </ol>

    <!-- Template for key info and key slip -->
    <script type="text/html" id="key_template">
        <table>
            <tr>
                <td>Primary UID</td>
                <td><%=publicKey.getPrimaryUserId()%></td>
            </tr>
            <tr>
                <td>Size</td>
                <td><%=publicKey.getSize()%></td>
            </tr>
            <tr>
                <td>Fingerprint</td>
                <td><%=publicKey.getFingerPrint()%></td>
            </tr>
            <tr>
                <td>Expiration</td>
                <td><%=publicKey.getExpiration()%></td>
            </tr>
        </table>
    </script>
    
    <script src="js/jquery-2.1.4.min.js"></script>
    <script src="js/jspdf.min.js"></script>
    <script src="js/openpgp.min.js"></script>
    <script src="js/template.js"></script>
    <script src="js/keyparty.js"></script>
</body>
</html>
